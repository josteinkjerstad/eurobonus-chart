---
import Layout from "../layouts/Layout.astro";
import type { Profile } from "../models/profile";
import { ProfileSection } from "../components/profile/ProfileSection";
---

<script>
  async function checkAuth() {
    try {
      const response = await fetch("/api/user");
      if (!response.ok) {
        window.location.href = "/signin";
      }
    } catch (error) {
      console.error("Error checking authentication:", error);
      window.location.href = "/signin";
    }
  }

  checkAuth();
</script>

<Layout title="Profile" signedIn>
  <ProfileSection client:load />
</Layout>
